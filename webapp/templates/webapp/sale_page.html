{% extends 'main/base.html' %}
{% load static %}

{% block content %}
    <nav class="breadcrumb-container" aria-label="breadcrumb">
        <ol class="breadcrumb-list">
            <li class="breadcrumb-item">
                <a href="{% url 'index' %}" class="nav-link">–ì–ª–∞–≤–Ω–∞—è</a>
            </li>
            <li class="breadcrumb-item active" aria-current="page">
                <a href="{% url 'sale' %}">
                    {% if has_filters %}
                        –ü—Ä–æ–¥–∞–∂–∞
                    {% else %}
                        –ü—Ä–æ–¥–∞–∂–∞ –≤—Å–µ –æ–±—ä–µ–∫—Ç—ã
                    {% endif %}
                </a>
            </li>
            {% if has_filters and first_property %}
                {% if first_property.is_active_apartment %}
                    <li class="breadcrumb-item">–ö–≤–∞—Ä—Ç–∏—Ä–∞</li>
                {% endif %}
                {% if first_property.is_active_house %}
                    <li class="breadcrumb-item">–î–æ–º</li>
                {% endif %}
                {% if first_property.is_commercial %}
                    <li class="breadcrumb-item">–ö–æ–º–º–µ—Ä—á–µ—Å–∫–æ–µ</li>
                {% endif %}
            {% endif %}
        </ol>
    </nav>

    <section>
        <div class="sale-container">
            <h1 class="page-title">–û–±—ä–µ–∫—Ç—ã –¥–ª—è –ø–æ–∫—É–ø–∫–∏</h1>

            {% if properties %}
                <div class="properties-list">
                    {% for property in properties %}
                        <div class="property-card">
                            <h2 class="property-name">
                                <a href="{% url 'sale_single' property.slug %}">{{ property.name }}</a>
                            </h2>
                            <p class="property-address">{{ property.address }}</p>
                            <p class="property-price">–¶–µ–Ω–∞: {{ property.price }} USD</p>

                            <p class="property-type">
                                –¢–∏–ø –Ω–µ–¥–≤–∏–∂–∏–º–æ—Å—Ç–∏:
                                {% if property.is_active_apartment %}
                                    –ö–≤–∞—Ä—Ç–∏—Ä–∞
                                {% elif property.is_active_house %}
                                    –î–æ–º
                                {% elif property.is_active_country_house %}
                                    –î–∞—á–∞
                                {% elif property.is_active_new %}
                                    –ù–æ–≤–æ—Å—Ç—Ä–æ–π–∫–∞
                                {% elif property.is_active_sold %}
                                    –ü—Ä–æ–¥–∞–Ω–æ
                                {% else %}
                                    –î—Ä—É–≥–æ–π —Ç–∏–ø
                                {% endif %}
                            </p>

                            <p class="property-description">{{ property.description|safe|truncatewords:30 }}</p>

                            <a href="{% url 'sale_single' property.slug %}">
                                {% if property.photos.all %}
                                    <div class="property-photos">
                                        <img src="{{ property.photos.all.0.photo.url }}"
                                             alt="{{ property.photos.all.0.alt_text }}"
                                             class="property-main-photo"/>
                                    </div>
                                {% endif %}
                            </a>

                        </div>
                    {% endfor %}
                </div>
            {% else %}
                <div class="no-properties-wrapper">
                    <div class="no-properties-message">
                        üí°‚ö†Ô∏èü§∑‚Äç‚ôÇÔ∏è –ö —Å–æ–∂–∞–ª–µ–Ω–∏—é, –æ–±—ä–µ–∫—Ç—ã –ø–æ –≤–∞—à–µ–º—É –∑–∞–ø—Ä–æ—Å—É –Ω–µ –Ω–∞–π–¥–µ–Ω—ã.
                        <br>
                        ‚úîÔ∏è –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –µ—â—ë —Ä–∞–∑, –ø–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞–∑–∞–¥ ‚ôªÔ∏è
                        <a href="javascript:history.back()" class="back-button">‚Üê –ù–∞–∑–∞–¥</a>
                    </div>
                </div>
            {% endif %}
        </div>
    </section>
{% endblock %}
