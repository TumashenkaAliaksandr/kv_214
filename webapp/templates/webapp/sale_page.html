{% extends 'main/base.html' %}
{% load currency_filters %}
{% load static %}

{% block content %}
    <nav class="breadcrumb-container" aria-label="breadcrumb">
        <ol class="breadcrumb-list">
            <li class="breadcrumb-item">
                <a href="{% url 'index' %}" class="nav-link">–ì–ª–∞–≤–Ω–∞—è</a>
            </li>
            <li class="breadcrumb-item active" aria-current="page">
                <a href="{% url 'sale' %}">
                    {% if has_filters %}
                        –ü—Ä–æ–¥–∞–∂–∞
                    {% else %}
                        –ü—Ä–æ–¥–∞–∂–∞ –≤—Å–µ –æ–±—ä–µ–∫—Ç—ã
                    {% endif %}
                </a>
            </li>
            {% if has_filters and first_property %}
                {% if first_property.is_active_apartment %}
                    <li class="breadcrumb-item">–ö–≤–∞—Ä—Ç–∏—Ä–∞</li>
                {% endif %}
                {% if first_property.is_active_house %}
                    <li class="breadcrumb-item">–î–æ–º</li>
                {% endif %}
                {% if first_property.is_commercial %}
                    <li class="breadcrumb-item">–ö–æ–º–º–µ—Ä—á–µ—Å–∫–æ–µ</li>
                {% endif %}
            {% endif %}
        </ol>
    </nav>

    <section>
        <div class="listing-wrapper">
            <h1 class="page-title">–û–±—ä–µ–∫—Ç—ã –¥–ª—è –ø–æ–∫—É–ø–∫–∏</h1>

            {% if properties %}
                <div class="listing-cards">
                    {% for property in properties %}
                        <article class="listing-card">
                            <h2 class="listing-title">
                                <a href="{% url 'sale_single' property.slug %}" class="listing-link">
                                    {{ property.name }}
                                </a>
                            </h2>

                            <p><b style="font-size: 15px">üß© –¢–∏–ø:</b>
                                {% if property.is_active_apartment %} –ö–≤–∞—Ä—Ç–∏—Ä–∞
                                {% elif property.is_active_house %} –î–æ–º
                                {% elif property.is_active_country_house %} –î–∞—á–∞
                                {% elif property.is_active_new %} –ù–æ–≤–æ—Å—Ç—Ä–æ–π–∫–∞
                                {% else %} –î—Ä—É–≥–æ–µ
                                {% endif %}
                            </p>
                            <p><b style="font-size: 15px">üìç –≠—Ç–∞–∂:</b> {{ property.floor|safe }}</p>
                            <p><b style="font-size: 15px">üö™ –ö–æ–º–Ω–∞—Ç:</b> {{ property.many_rooms|safe }}</p>
                            <p><b style="font-size: 15px">üìê –ü–ª–æ—â–∞–¥—å:</b> {{ property.area }} –º¬≤
                                {% if property.area_ga %} ({{ property.area_ga }} —Å–æ—Ç./–≥–∞) {% endif %}
                            </p>

                            <p><b style="font-size: 15px; margin-top: 13px">–¶–µ–Ω–∞ BYN:</b> <span
                                    class="price-sale">{{ property.price|multiply:usd_to_byn_rate|floatformat:2 }}</span>
                            </p>
                            {% if usd_to_byn_rate and property.price %}
                                <p><b style="font-size: 15px">–¶–µ–Ω–∞ –≤ USD: $</b> <span class="price-sale">{{ property.price }}</span></p>
                            {% else %}
                                <p style="font-size: 15px">–¶–µ–Ω–∞ USD: $–Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∞</p>
                            {% endif %}


                            <div class="listing-description">{{ property.description|truncatechars:74|safe }}</div>

                            <a href="{% url 'sale_single' property.slug %}" class="listing-photo-link">
                                {% if property.photos.all %}
                                    <div class="listing-photo-wrapper">
                                        <img src="{{ property.photos.all.0.photo.url }}"
                                             alt="{{ property.photos.all.0.alt_text }}"
                                             class="listing-photo"/>
                                    </div>
                                {% endif %}
                            </a>
                        </article>
                    {% endfor %}
                </div>
            {% else %}
                <div class="no-listings">
                    <p class="no-listings-message">
                        üí°‚ö†Ô∏èü§∑‚Äç‚ôÇÔ∏è –ö —Å–æ–∂–∞–ª–µ–Ω–∏—é, –æ–±—ä–µ–∫—Ç—ã –ø–æ –≤–∞—à–µ–º—É –∑–∞–ø—Ä–æ—Å—É –Ω–µ –Ω–∞–π–¥–µ–Ω—ã.
                        <br>
                        ‚úîÔ∏è –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –µ—â—ë —Ä–∞–∑, –ø–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞–∑–∞–¥ ‚ôªÔ∏è
                        <a href="javascript:history.back()" class="btn-back">‚Üê –ù–∞–∑–∞–¥</a>
                    </p>
                </div>
            {% endif %}
        </div>
    </section>
{% endblock %}
