{% extends 'main/base.html' %}
{% load static %}


{% block content %}

    <!-- –ì–ª–∞–≤–Ω—ã–π –°–ª–∞–π–¥–µ—Ä -->
    {% include 'main/main_slider.html' %}

    <!-- –§–∏–ª—å—Ç–µ—Ä –ø–æ–¥ –≥–ª —Å–ª–∞–π–¥–µ—Ä–æ–º -->
    {% include 'webapp/filter.html' %}

    <!-- –°–ª–∞–π–¥–µ—Ä –Ω–æ–≤—ã–µ –æ–±—ä–µ–∫—Ç—ã -->
    {% include 'main/new_objects_slider.html' %}

    <!-- –ü–æ—á–µ–º—É –Ω–∞–º –¥–æ–≤–µ—Ä—è—é—Ç -->
    <section class="trust-section">
        <h2><i class="fa-solid fa-circle-question"></i> –ü–æ—á–µ–º—É –Ω–∞–º –¥–æ–≤–µ—Ä—è—é—Ç</h2>
        <div class="trust-items">
            {% for reason in trust_reasons %}
                <div class="trust-item">
                    <i class="{{ reason.icon_class }}"></i>
                    <p>{{ reason.text }}</p>
                </div>
            {% empty %}
                <div class="trust-item">
                    <i class="fa-solid fa-shield-virus"></i>
                    <p>–ù–∞–¥–µ–∂–Ω–æ—Å—Ç—å</p>
                </div>
                <div class="trust-item">
                    <i class="fa-solid fa-user-check"></i>
                    <p>–ü—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª–∏–∑–º</p>
                </div>
                <div class="trust-item">
                    <i class="fa-solid fa-handshake"></i>
                    <p>–ß–µ—Å—Ç–Ω–æ—Å—Ç—å</p>
                </div>
                <div class="trust-item">
                    <i class="fa-solid fa-clock"></i>
                    <p>–ë—ã—Å—Ç—Ä—ã–π –æ—Ç–∫–ª–∏–∫</p>
                </div>
            {% endfor %}
        </div>

        <!-- –ù–æ–≤–∞—è —Å—Ç—Ä–æ–∫–∞ —Å –∞–Ω–∏–º–∏—Ä–æ–≤–∞–Ω–Ω—ã–º–∏ —Å—á–µ—Ç—á–∏–∫–∞–º–∏ -->
        <div class="trust-stats">
            <div class="stat-item">
                <h3><span class="counter" data-target="{{ sold_objects }}">0</span>+</h3>
                <p>–û–±—ä–µ–∫—Ç–æ–≤ –ø—Ä–æ–¥–∞–Ω–æ</p>
            </div>
            <div class="stat-item">
                <h3><span class="counter" data-target="{{ avg_sale_days }}">0</span> –¥–Ω–µ–π</h3>
                <p>–°—Ä–µ–¥–Ω–∏–π —Å—Ä–æ–∫ –ø—Ä–æ–¥–∞–∂–∏</p>
            </div>
            <div class="stat-item">
                <h3><span class="counter" data-target="{{ support_247 }}">0</span>/7</h3>
                <p>–ù–∞ —Å–≤—è–∑–∏</p>
            </div>
        </div>
    </section>


    <!-- –í–∏–¥–µ–æ –±–ª–æ–∫ -->
    {% include 'webapp/video_block.html' %}


    <!-- –í—Ç–æ—Ä–æ–π —Å–ª–∞–π–¥–µ—Ä –æ–±—ä–µ–∫—Ç–æ–≤ (–Ω–∞–æ–±–æ—Ä–æ—Ç) -->
    <section class="slider-objects-reverse">
        <h2><i class="fa-solid fa-home"></i> –í—Å–µ –æ–±—ä–µ–∫—Ç—ã</h2>
        <div class="slider-container reverse-direction">
            <button class="arrow left-arrow" aria-label="–í–ª–µ–≤–æ"><i class="fa fa-chevron-left"></i></button>
            <div class="objects-wrapper">
                <div class="objects">
                    {% for property in properties_all %}
                        <div class="object-item">
                            <a href="{% if property.is_rent %}{% url 'rent_single' property.slug %}
                 {% elif property.is_sale %}{% url 'sale_single' property.slug %}
                 {% else %}#{% endif %}">
                                {% if property.photos.all %}
                                    <img src="{{ property.photos.all.0.photo.url }}" alt="{{ property.name }}"/>
                                {% else %}
                                    <img src="{% static 'webapp/images/kvatera_default.jpg' %}"
                                         alt="{{ property.name }}"/>
                                {% endif %}
                                <p>{{ property.name }}</p>
                            </a>
                        </div>
                    {% empty %}
                        <p>–û–±—ä–µ–∫—Ç–æ–≤ –Ω–µ—Ç</p>
                    {% endfor %}

                </div>
            </div>
            <button class="arrow right-arrow" aria-label="–í–ø—Ä–∞–≤–æ"><i class="fa fa-chevron-right"></i></button>
        </div>
    <a href="{% url 'sale' %}">
  <button class="btn btn-see_all" type="button">–ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –≤—Å–µ</button>
</a>

    </section>

    <!-- –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –Ω–∞—Å -->
    <section class="about-section" id="about">
        <div class="container about-container">
            <div class="about-photo">
                <img src="{% static 'webapp/images/kvatera_about.jpg' %}" alt="–§–æ—Ç–æ –∫–æ–º–ø–∞–Ω–∏–∏"/>
            </div>
            <div class="about-text">
                <h2>‚úî –û –Ω–∞—à–µ–º –∞–≥–µ–Ω—Ç—Å—Ç–≤–µ –Ω–µ–¥–≤–∏–∂–∏–º–æ—Å—Ç–∏</h2>
                <p>
                    ‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê<br>
                    –ú—ã –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—ã —Å–≤–æ–µ–≥–æ –¥–µ–ª–∞, –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è—é—â–∏–µ –ø–æ–ª–Ω—ã–π —Å–ø–µ–∫—Ç—Ä —É—Å–ª—É–≥ –ø–æ –ø—Ä–æ–¥–∞–∂–µ –∏ –∞—Ä–µ–Ω–¥–µ –Ω–µ–¥–≤–∏–∂–∏–º–æ—Å—Ç–∏.
                    –ù–∞—à –∫–æ–ª–ª–µ–∫—Ç–∏–≤ ‚Äî –∫–æ–º–∞–Ω–¥–∞ –æ–ø—ã—Ç–Ω—ã—Ö —Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç–æ–≤, –∫–æ—Ç–æ—Ä—ã–µ –ø–æ–º–æ–≥—É—Ç –≤–∞–º –Ω–∞–π—Ç–∏ –∏–¥–µ–∞–ª—å–Ω–æ–µ –∂–∏–ª—å–µ.
                </p>
                <div class="contacts-about">
                    <p>
                        <i class="fa-solid fa-phone"></i>
                        <a href="tel:{{ contact.phone|urlencode }}">{{ contact.phone }}</a>
                    </p>
                    <p>
                        <i class="fa-solid fa-envelope"></i>
                        <a href="mailto:{{ contact.email|urlencode }}">{{ contact.email }}</a>
                    </p>
                    <div class="social-about">
                        {% for social in contact.social_networks.all %}
                            <a href="{{ social.url }}" aria-label="{{ social.name }}" target="_blank"
                               rel="noopener noreferrer">
                                <i class="{{ social.icon }}"></i>
                            </a>
                        {% empty %}
                            <p>–°–æ—Ü—Å–µ—Ç–µ–π –Ω–µ—Ç</p>
                        {% endfor %}
                    </div>
                </div>
            </div>
        </div>

        <!-- –ö–∞—Ä—Ç–∞ –ø–æ–¥ —Ñ–æ—Ç–æ –∏ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π -->
        <div class="container">
            <h3 class="margin-set">üìç –ú—ã –Ω–∞ –∫–∞—Ä—Ç–µ</h3>
            <p>üåê –≥.–ù–æ–≤–æ–ø–æ–ª–æ—Ü–∫ —É–ª. –ú–æ–ª–æ–¥–µ–∂–Ω–∞—è 72–± | –ø–æ–º–µ—â–µ–Ω–∏–µ 8</p>
            <div class="map-container">
                <iframe
                        src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d2257.7787718957343!2d28.6432172!3d55.536222599999995!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x46c485209fe11a4b%3A0x906ceb1e54e03589!2z0KbQtdC90YLRgCDRgNC40Y3Qu9GC0LXRgNGB0LrQuNGFINGD0YHQu9GD0LMg0JrQstCw0KLRjdGA0LAgMjE0!5e0!3m2!1sru!2sby!4v1755249880238!5m2!1sru!2sby"
                        width="1200"
                        height="350"
                        style="border:0;"
                        allowfullscreen=""
                        loading="lazy"
                        referrerpolicy="no-referrer-when-downgrade"
                        class="map-iframe"
                ></iframe>
            </div>
        </div>
    </section>


    {% include 'webapp/consultation_form.html' %}
    <script>
            // –ú–æ–¥–∞–ª–∫–∞ –¥–ª—è –∑–∞–∫–∞–∑–∞ –∑–≤–æ–Ω–∫–∞
        function showCallbackModal() {
            const modal = document.getElementById('consultationModal');
            modal.style.display = 'flex';
            document.getElementById('inputName').focus();
        }
    </script>

    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –¥–ª—è —Ñ–æ—Ä–º—ã –∑–∞–∫–∞–∑–∞ –∑–≤–æ–Ω–∫–∞ -->
    <div class="modal-overlay" id="consultationModal" style="display:none;">
        <div class="modal-content" role="dialog" aria-modal="true" aria-labelledby="modalTitle">
            <button class="modal-close" id="closeConsultationBtn" aria-label="–ó–∞–∫—Ä—ã—Ç—å –æ–∫–Ω–æ">&times;</button>
            <h2 id="modalTitle">üï≠ –ó–∞–∫–∞–∑–∞—Ç—å –∑–≤–æ–Ω–æ–∫</h2>
            <form id="consultationFormtwo" method="post" action="/send-consultation-message/">
                {% csrf_token %}
                <label for="inputName">–ò–º—è</label>
                <input type="text" id="inputName" name="name" required>

                <label for="inputPhone">–¢–µ–ª–µ—Ñ–æ–Ω</label>
                <input type="tel" id="inputPhone" name="phone" required pattern="^\+?[0-9\s\-]{7,15}$"
                       placeholder="+7 999 999-99-99">

                <label for="inputDescription">–û–ø–∏—Å–∞–Ω–∏–µ</label>
                <textarea id="inputDescription" name="description" rows="4"
                          placeholder="–û–ø–∏—à–∏—Ç–µ –≤–∞—à –≤–æ–ø—Ä–æ—Å –∏–ª–∏ –ø–æ–∂–µ–ª–∞–Ω–∏—è"></textarea>

                <button type="submit" class="btn-submit">–û—Ç–ø—Ä–∞–≤–∏—Ç—å</button>
            </form>
        </div>
    </div>

{% endblock %}
